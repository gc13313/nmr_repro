cd ""

use medication_variables.dta, clear

merge m:1 n_eid using "reprotraits_ds.dta", keepusing(n_eid)


drop if _m==1
drop _m

********************************************************************************
*								statins										   *
********************************************************************************

gen statin = .

foreach var in n_20003_0_0 n_20003_0_1 n_20003_0_2 n_20003_0_3 n_20003_0_4 n_20003_0_5 ///
	n_20003_0_6 n_20003_0_7 n_20003_0_8 n_20003_0_9 n_20003_0_10 n_20003_0_11 ///
	n_20003_0_12 n_20003_0_13 n_20003_0_14 n_20003_0_15 n_20003_0_16 ///
	n_20003_0_17 n_20003_0_18 n_20003_0_19 n_20003_0_20 n_20003_0_21 ///
	n_20003_0_22 n_20003_0_23 n_20003_0_24 n_20003_0_25 n_20003_0_26 ///
	n_20003_0_27 n_20003_0_28 n_20003_0_29 n_20003_0_30 n_20003_0_31 ///
	n_20003_0_32 n_20003_0_33 n_20003_0_34 n_20003_0_35 n_20003_0_36 ///
	n_20003_0_37 n_20003_0_38 n_20003_0_39 n_20003_0_40 n_20003_0_41 ///
	n_20003_0_42 n_20003_0_43 n_20003_0_44 n_20003_0_45 n_20003_0_46 ///
	n_20003_0_47 {
	
	foreach val in 1141146234 1140888594 1140888648 1141192410 1140861958 {
		
		replace statin = 1 if `var'==`val'
		replace statin = 0 if `var'!=`val' & statin==.
		replace statin = 0 if `var'==. & statin==.

	}
}	

lab def statin 0 "No Statins" 1 "Statins", modify
lab val statin statin
lab var statin "Statin use - Nurses int." 

gen medication_female = n_6153_0_0
replace medication_female = n_6153_0_1 if medication_female==.
replace medication_female = n_6153_0_2 if medication_female==.
replace medication_female = n_6153_0_3 if medication_female==.
/*replace medication_female = n_6153_1_0 if medication_female==.
replace medication_female = n_6153_1_1 if medication_female==.
replace medication_female = n_6153_1_2 if medication_female==.
replace medication_female = n_6153_1_3 if medication_female==.
replace medication_female = n_6153_2_0 if medication_female==.
replace medication_female = n_6153_2_1 if medication_female==.
replace medication_female = n_6153_2_2 if medication_female==.
replace medication_female  n_6153_2_3 if medication_female==.*/

lab def medications -7 "None of the above" -3 "Prefer not to answer" ///
	-1 "Do not know" 1 "Cholesterol lowering" 2 " BP medication" 3 "Insulin" ///
	4 "Hormone replacement therapy" 5 "Oral contraceptive/minipill", modify
lab val medication_female medications	
lab var medication_female "Self report medications - female only"

capture drop n_6153_0_1 n_6153_0_2 n_6153_0_3 n_6153_1_1 n_6153_1_2 n_6153_1_3 n_6153_2_0 n_6153_2_1 n_6153_2_2 n_6153_2_3

gen medication_male = n_6177_0_0
replace medication_male = n_6177_0_1 if medication_male==.
replace medication_male = n_6177_0_2 if medication_male==.
/*replace medication_male = n_6177_1_0 if medication_male==.
replace medication_male = n_6177_1_1 if medication_male==.
replace medication_male = n_6177_1_2 if medication_male==.
replace medication_male = n_6177_2_0 if medication_male==.
replace medication_male = n_6177_2_1 if medication_male==.
replace medication_male = n_6177_2_2 if medication_male==.*/

lab def medications -7 "None of the above" -3 "Prefer not to answer" ///
	-1 "Do not know" 1 "Cholesterol lowering" 2 " BP medication" 3 "Insulin" ///
	4 "Hormone replacement therapy" 5 "Oral contraceptive/minipill", modify
lab val medication_male medications	
lab var medication_male "Self report medications - male only"

capture drop n_6177_0_1 n_6177_0_2 n_6177_1_0 n_6177_1_1 n_6177_1_2 n_6177_2_0 n_6177_2_1 n_6177_2_2


gen statin_selfreport = medication_female if medication_female==1
replace statin_selfreport = medication_male if medication_male==1
replace statin_selfreport=0 if statin_selfreport==.
lab val statin_selfreport statin
lab var statin_selfreport "Statin use - self reported"

gen statin_cat = .

foreach var in n_20003_0_0 n_20003_0_1 n_20003_0_2 n_20003_0_3 n_20003_0_4 n_20003_0_5 ///
	n_20003_0_6 n_20003_0_7 n_20003_0_8 n_20003_0_9 n_20003_0_10 n_20003_0_11 ///
	n_20003_0_12 n_20003_0_13 n_20003_0_14 n_20003_0_15 n_20003_0_16 ///
	n_20003_0_17 n_20003_0_18 n_20003_0_19 n_20003_0_20 n_20003_0_21 ///
	n_20003_0_22 n_20003_0_23 n_20003_0_24 n_20003_0_25 n_20003_0_26 ///
	n_20003_0_27 n_20003_0_28 n_20003_0_29 n_20003_0_30 n_20003_0_31 ///
	n_20003_0_32 n_20003_0_33 n_20003_0_34 n_20003_0_35 n_20003_0_36 ///
	n_20003_0_37 n_20003_0_38 n_20003_0_39 n_20003_0_40 n_20003_0_41 ///
	n_20003_0_42 n_20003_0_43 n_20003_0_44 n_20003_0_45 n_20003_0_46 ///
	n_20003_0_47  {
	
	foreach val in 1141146234 1140888594 1140888648 1141192410 1140861958 {
		
		replace statin_cat = 1 if `var'== 1141146234
		replace statin_cat = 2 if `var'== 1140888594
		replace statin_cat = 3 if `var'== 1140888648
		replace statin_cat = 4 if `var'== 1141192410
		replace statin_cat = 5 if `var'== 1140861958
		
	}
}	

replace statin_cat = 0 if statin_cat==.

lab var statin_cat "Prescribed Statin - Nurses int."
lab def statin_cat 0"No Statin" 1 "Atorvastatin" 2 "Fluvastatin" 3 "Pravastatin" 4 "Rosuvastatin" 5 "Simvastatin"
lab val statin_cat statin_cat

********************************************************************************
*						Antihypertensive									   *
********************************************************************************

gen antihypertensive = .

foreach var in n_20003_0_0 n_20003_0_1 n_20003_0_2 n_20003_0_3 n_20003_0_4 n_20003_0_5 ///
	n_20003_0_6 n_20003_0_7 n_20003_0_8 n_20003_0_9 n_20003_0_10 n_20003_0_11 ///
	n_20003_0_12 n_20003_0_13 n_20003_0_14 n_20003_0_15 n_20003_0_16 ///
	n_20003_0_17 n_20003_0_18 n_20003_0_19 n_20003_0_20 n_20003_0_21 ///
	n_20003_0_22 n_20003_0_23 n_20003_0_24 n_20003_0_25 n_20003_0_26 ///
	n_20003_0_27 n_20003_0_28 n_20003_0_29 n_20003_0_30 n_20003_0_31 ///
	n_20003_0_32 n_20003_0_33 n_20003_0_34 n_20003_0_35 n_20003_0_36 ///
	n_20003_0_37 n_20003_0_38 n_20003_0_39 n_20003_0_40 n_20003_0_41 ///
	n_20003_0_42 n_20003_0_43 n_20003_0_44 n_20003_0_45 n_20003_0_46 ///
	n_20003_0_47  {
	
	foreach val in ///
	1140860332	1140860334	1140860336	1140860338	1140860340	1140860342	///
	1140860348	1140860352	1140860356	1140860358	1140860362	1140860380	///
	1140860382	1140860386	1140860390	1140860394	1140860396	1140860398	///
	1140860402	1140860404	1140860406	1140860410	1140860418	1140860422	///
	1140860426	1140860434	1140860454	1140860470	1140860478	1140860492	///
	1140860498	1140860520	1140860532	1140860534	1140860544	1140860552	///
	1140860558	1140860562	1140860564	1140860580	1140860590	1140860610	///
	1140860628	1140860632	1140860638	1140860654	1140860658	1140860690	///
	1140860696	1140860706	1140860714	1140860728	1140860736	1140860738	///
	1140860750	1140860752	1140860758	1140860764	1140860776	1140860784	///
	1140860790	1140860802	1140860806	1140860828	1140860830	1140860834	///
	1140860836	1140860838	1140860840	1140860842	1140860846	1140860848	///
	1140860862	1140860878	1140860882	1140860892	1140860904	1140860912	///
	1140860918	1140860938	1140860942	1140860952	1140860954	1140860966	///
	1140860972	1140860976	1140860982	1140860988	1140860994	1140861000	///
	1140861002	1140861008	1140861010	1140861016	1140861022	1140861024	///
	1140861034	1140861046	1140861068	1140861070	1140861088	1140861090	///
	1140861106	1140861110	1140861114	1140861120	1140861128	1140861130	///
	1140861136	1140861138	1140861166	1140861176	1140861190	1140861194	///
	1140861202	1140861266	1140861268	1140861276	1140861282	1140861326	///
	1140861384	1140864950	1140864952	1140866072	1140866074	1140866078	///
	1140866084	1140866086	1140866090	1140866092	1140866094	1140866096	///
	1140866102	1140866104	1140866108	1140866110	1140866116	1140866122	///
	1140866128	1140866132	1140866136	1140866138	1140866140	1140866144	///
	1140866146	1140866156	1140866158	1140866162	1140866164	1140866168	///
	1140866182	1140866192	1140866194	1140866200	1140866202	1140866206	///
	1140866210	1140866212	1140866220	1140866222	1140866226	1140866230	///
	1140866232	1140866236	1140866244	1140866248	1140866262	1140866280	///
	1140866282	1140866306	1140866308	1140866312	1140866318	1140866324	///
	1140866328	1140866330	1140866332	1140866334	1140866340	1140866352	///
	1140866354	1140866356	1140866360	1140866388	1140866390	1140866396	///
	1140866400	1140866402	1140866404	1140866406	1140866408	1140866410	///
	1140866412	1140866416	1140866418	1140866420	1140866422	1140866426	///
	1140866438	1140866440	1140866442	1140866444	1140866446	1140866448	///
	1140866450	1140866460	1140866466	1140866484	1140866506	1140866546	///
	1140866554	1140866692	1140866704	1140866712	1140866724	1140866726	///
	1140866738	1140866756	1140866758	1140866764	1140866766	1140866778	///
	1140866782	1140866784	1140866798	1140866800	1140866802	1140866804	///
	1140875808	1140879758	1140879760	1140879762	1140879778	1140879782	///
	1140879786	1140879794	1140879798	1140879802	1140879806	1140879810	///
	1140879818	1140879822	1140879824	1140879826	1140879830	1140879834	///
	1140879842	1140879854	1140879866	1140888510	1140888512	1140888552	///
	1140888556	1140888560	1140888578	1140888582	1140888586	1140888646	///
	1140888686	1140888760	1140888762	1140909368	1140911698	1140916356	///
	1140916362	1140917428	1140923572	1140923712	1140923718	1140926778	///
	1140926780	1141145658	1141145660	1141145668	1141151016	1141151018	///
	1141151382	1141152600	1141152998	1141153006	1141153026	1141153032	///
	1141153328	1141156754	1141156808	1141156836	1141156846	1141157252	///
	1141157254	1141164148	1141164154	1141164276	1141164280	1141165470	///
	1141165476	1141166006	1141167822	1141167832	1141171152	1141171336	///
	1141171344	1141172682	1141172686	1141172698	1141173888	1141180592	///
	1141180598	1141187788	1141187790	1141190160	1141192064	1141193282	///
	1141193346	1141194794	1141194800	1141194804	1141194808	1141194810	///
	1141201038	1141201040 {
		
		replace antihypertensive = 1 if `var'==`val'
		replace antihypertensive = 0 if `var'!=`val' & antihypertensive==.
		replace antihypertensive = 0 if `var'==. & antihypertensive==.

	}
}	

lab def antihypertensive 0 "No antihypertensive" 1 "Antihypertensive", modify
lab val antihypertensive antihypertensive
lab var antihypertensive "Antihypertensive use" 
rename antihypertensive b_treatedhyp



********************************************************************************
*								steroids										   *
********************************************************************************

gen steroids = .

foreach var in n_20003_0_0 n_20003_0_1 n_20003_0_2 n_20003_0_3 n_20003_0_4 n_20003_0_5 ///
	n_20003_0_6 n_20003_0_7 n_20003_0_8 n_20003_0_9 n_20003_0_10 n_20003_0_11 ///
	n_20003_0_12 n_20003_0_13 n_20003_0_14 n_20003_0_15 n_20003_0_16 ///
	n_20003_0_17 n_20003_0_18 n_20003_0_19 n_20003_0_20 n_20003_0_21 ///
	n_20003_0_22 n_20003_0_23 n_20003_0_24 n_20003_0_25 n_20003_0_26 ///
	n_20003_0_27 n_20003_0_28 n_20003_0_29 n_20003_0_30 n_20003_0_31 ///
	n_20003_0_32 n_20003_0_33 n_20003_0_34 n_20003_0_35 n_20003_0_36 ///
	n_20003_0_37 n_20003_0_38 n_20003_0_39 n_20003_0_40 n_20003_0_41 ///
	n_20003_0_42 n_20003_0_43 n_20003_0_44 n_20003_0_45 n_20003_0_46 ///
	n_20003_0_47  {
	
	foreach val in 1140853854	1140854694	1140854700	1140854784	1140854788	1140854816	///
1140854834	1140854888	1140854916	1140854990	1140857672	1140857678	///
1140862572	1140868364	1140868370	1140873620	1140874790	1140874792	///
1140874794	1140874810	1140874814	1140874816	1140874822	1140874896	///
1140874930	1140874936	1140874940	1140874944	1140874950	1140874954	///
1140874956	1140874976	1140874978	1140875668	1140875684	1140876032	///
1140876036	1140876044	1140876046	1140876052	1140876058	1140876076	///
1140876104	1140876456	1140878562	1140879922	1140879934	1140881938	///
1140882152	1140882622	1140882624	1140882626	1140882630	1140882694	///
1140882708	1140882718	1140882722	1140882724	1140882728	1140882730	///
1140882732	1140882740	1140882742	1140882756	1140882758	1140882764	///
1140882766	1140882768	1140882774	1140882776	1140882778	1140882780	///
1140882782	1140882794	1140882800	1140882806	1140882808	1140882816	///
1140882818	1140882820	1140882822	1140882824	1140882826	1140882830	///
1140882832	1140882836	1140882840	1140882842	1140882844	1140882846	///
1140882848	1140882850	1140882852	1140882864	1140882888	1140882892	///
1140882894	1140882896	1140882898	1140882902	1140882904	1140882906	///
1140882908	1140882910	1140882914	1140882916	1140882918	1140882920	///
1140882926	1140882928	1140882932	1140882934	1140882938	1140883022	///
1140883026	1140883028	1140883030	1140883034	1140883038	1140883040	///
1140883044	1140883048	1140883052	1140883054	1140883056	1140883058	///
1140883060	1140883062	1140883064	1140884636	1140884640	1140884642	///
1140884646	1140884654	1140884660	1140884664	1140884672	1140884676	///
1140884696	1140884700	1140884704	1140884716	1140888074	1140888092	///
1140888098	1140888124	1140888130	1140888134	1140888142	1140888150	///
1140888166	1140888168	1140888172	1140888176	1140888178	1140888184	///
1140888194	1140909786	1140909894	1140910424	1140910634	1141151424	///
1141157294	1141157402	1141157418	1141162532	1141164086	1141167174	///
1141169844	1141173346	1141174512	1141174520	1141174548	1141174552	///
1141179072	1141179982	1141180342	1141181062	1141181554	1141181610	///
1141189464	1141191748	1141194840	1141195232	1141195280	{
		
		replace steroids = 1 if `var'==`val'
		replace steroids = 0 if `var'!=`val' & steroids==.
		replace steroids = 0 if `var'==. & steroids==.

	}
}	

lab def steroids 0 "No steroids" 1 "Steroid use", modify
lab val steroids steroids
lab var steroids "Corticosteroid use" 
rename steroid b_corticosteroids

********************************************************************************
*				Non-statin lipid lowering therapy							   *
********************************************************************************

gen lipid_lowering = .

foreach var in n_20003_0_0 n_20003_0_1 n_20003_0_2 n_20003_0_3 n_20003_0_4 n_20003_0_5 ///
	n_20003_0_6 n_20003_0_7 n_20003_0_8 n_20003_0_9 n_20003_0_10 n_20003_0_11 ///
	n_20003_0_12 n_20003_0_13 n_20003_0_14 n_20003_0_15 n_20003_0_16 ///
	n_20003_0_17 n_20003_0_18 n_20003_0_19 n_20003_0_20 n_20003_0_21 ///
	n_20003_0_22 n_20003_0_23 n_20003_0_24 n_20003_0_25 n_20003_0_26 ///
	n_20003_0_27 n_20003_0_28 n_20003_0_29 n_20003_0_30 n_20003_0_31 ///
	n_20003_0_32 n_20003_0_33 n_20003_0_34 n_20003_0_35 n_20003_0_36 ///
	n_20003_0_37 n_20003_0_38 n_20003_0_39 n_20003_0_40 n_20003_0_41 ///
	n_20003_0_42 n_20003_0_43 n_20003_0_44 n_20003_0_45 n_20003_0_46 ///
	n_20003_0_47  {
	
	foreach val in 1140865576 1140865576 1141157416 1140861924 1141157260 1140861926 1140861928 /// 
1140861936 1140861944 1140861922 1140861942 1140861946 1140861954 1140862026 ///
1140862028 1141175908 1141168568 1141171548 1141201306 1140888590 1140861848 ///
1140851880 1140851882 1140861856 1141157262 1140861858 1140926582 1140861866 ///
1140861324 1140861868 1141188546 1140861876 1140861878 1140861884 1141181868 ///
1140861892 1141162544 1141172214 1141182910 1140865752 1141157494 1141145830 ///
1141192736 1141192740 {
		
		replace lipid_lowering = 1 if `var'==`val'
		replace lipid_lowering = 0 if `var'!=`val' & lipid_lowering==.
		replace lipid_lowering = 0 if `var'==. & lipid_lowering==.

	}
}	

lab def lipid_lowering 0 "No lipid lowering drug" 1 "Non-statin lipid lowering drug use", modify
lab val lipid_lowering lipid_lowering
lab var lipid_lowering "Non-statin lipid lowering therapy" 



********************************************************************************
*						Self-report medications								   *
********************************************************************************

merge 1:1 n_eid using "reprotraits_nmr_data_ds.dta", keepusing(n_6153* n_6177*)

gen medications = n_6153_0_0
replace medications = n_6153_1_0 if medications==.
replace medications = n_6153_3_0 if medications==.
replace medications = n_6153_3_1 if medications==.
replace medications = n_6153_3_2 if medications==.

replace medications = n_6177_0_0 if medications==.
replace medications = n_6177_3_0 if medications==.
replace medications = n_6177_3_1 if medications==.
replace medications = n_6177_3_2 if medications==.

lab var medications "Medications - self report"
lab val medications medications	

drop _merge

save "medications_data", replace


fre statin
fre statin_selfreport
fre statin_cat

tab statin n_31_0_0







